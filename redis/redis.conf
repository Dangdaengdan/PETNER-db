# redis.conf - 통합 Redis 설정
# 세션(database 0)과 캐시(database 1) 모두 지원

# 기본 연결 설정
bind 0.0.0.0
port 6379
timeout 43200

# 메모리 설정 (세션 + 캐시 고려하여 256MB로 증설)
maxmemory 256mb
maxmemory-policy allkeys-lru

# 클라이언트 (500명)
maxclients 500

# 데이터베이스 개수 (기본 16개, 0=세션, 1=캐시)
databases 16

# 데이터 보존 (세션 데이터를 위해 AOF 활성화)
appendonly yes
appendfsync everysec

# 로그 (에러만 출력)
loglevel warning

# 세션용 설정 (database 0)
# - 영속성: AOF 활성화 (세션 복구 가능)
# - 만료: Spring Session에서 관리

# 캐시용 설정 (database 1) 
# - 영속성: AOF 사용 (메모리 부족시 LRU 정책으로 자동 삭제)
# - 만료: 애플리케이션에서 TTL 설정